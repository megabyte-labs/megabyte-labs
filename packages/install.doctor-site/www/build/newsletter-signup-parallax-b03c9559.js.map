{"file":"newsletter-signup-parallax-b03c9559.js","mappings":"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","names":[],"sources":["../stencil-docusaurus-lib/src/components/newsletter-signup-parallax/newsletter-signup-parallax.scss?tag=newsletter-signup-parallax","../stencil-docusaurus-lib/src/components/newsletter-signup-parallax/newsletter-signup-parallax.tsx"],"sourcesContent":["newsletter-signup-parallax {\n  position: absolute;\n  height: 50px;\n  width: 180px;\n  left: calc(50% - 188px);\n  width: 180px;\n  transition: all 1s ease-in-out;\n  opacity: 0;\n  pointer-events: none;\n  z-index: -1;\n\n  .hs-submit {\n    position: absolute;\n    top: 0;\n    right: 0;\n  }\n\n  .hs-button {\n    letter-spacing: 0;\n    font-weight: bold;\n    margin-inline-start: 0.5em;\n    height: 50px;\n    border-radius: 50px;\n  }\n\n  input {\n    padding-inline-start: 16px;\n    width: 100%;\n    height: 50px;\n    border: 0;\n    border-radius: 50px;\n    transition: border 0.2s ease-out, box-shadow 0.2s ease-out;\n  }\n\n  .form-message > p {\n    position: relative;\n    top: 60px;\n    color: white;\n  }\n}\nnewsletter-signup-parallax.loading {\n  display: none;\n}\nnewsletter-signup-parallax.open {\n  width: 374px;\n  opacity: 1;\n  pointer-events: all;\n  z-index: 1;\n}\n\nnewsletter-signup-parallax.nopointer {\n  pointer-events: none;\n\n  .form-group {\n    display: none;\n  }\n\n  .hs-form {\n    display: none;\n  }\n}","import { Component, Host, State, h, Prop } from '@stencil/core'\nimport { Paragraph } from 'ionic-ds-no-fonts'\n\ndeclare global {\n  interface Window {\n    hbspt: {\n      forms: {\n        create: ({ }) => any\n      }\n    }\n  }\n}\n\n@Component({\n  tag: 'newsletter-signup-parallax',\n  styleUrl: 'newsletter-signup-parallax.scss',\n})\nexport class NewsletterSignupParallax {\n  @Prop() defaults: any\n  @State() email: string = '';\n  @State() isLoading: boolean = false;\n  @State() hasSubmitted: boolean = false;\n  @State() isValid: boolean = true;\n  @State() inlineMessage: string = '';\n\n  componentWillLoad() { }\n\n  handleNewsletterSubmit(e: Event) {\n    e.preventDefault()\n\n    this.isLoading = true\n\n    const xhr = new XMLHttpRequest()\n    const url = [\n      'https://api.hsforms.com/submissions/v3/integration/submit',\n      this.defaults.hubspot.emailForm.id,\n      this.defaults.hubspot.emailForm.key,\n    ].join('/')\n    xhr.open('POST', url)\n    xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8')\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        const json = JSON.parse(xhr.responseText)\n        this.inlineMessage = json.inlineMessage\n        this.isLoading = false\n        this.hasSubmitted = true\n        this.isValid = true\n      } else if (xhr.readyState == 4 && xhr.status == 400) {\n        this.inlineMessage = 'Please enter a valid e-mail address.'\n        this.isLoading = false\n        this.isValid = false\n      }\n    }\n\n    const hutkMatch =\n      document.cookie.match && document.cookie.match(/hubspotutk=(.*?);/)\n    const hutk = hutkMatch ? hutkMatch[1] : undefined\n\n    xhr.send(\n      JSON.stringify({\n        submittedAt: new Date().getTime(),\n        fields: [\n          {\n            name: 'email',\n            value: this.email,\n          },\n          {\n            name: 'first_campaign_conversion',\n            value: this.defaults.brandName + ' Newsletter Parallax',\n          },\n        ],\n        context: {\n          hutk,\n          pageUri: window.location.href,\n          pageName: document.title,\n        },\n      }),\n    )\n  }\n\n  handleEmailChange(ev: any) {\n    this.email = ev.target.value\n    this.isValid = true\n  }\n\n  handleInlineMessage(returnMessage: string) {\n    const messageMatch =\n      returnMessage.match && returnMessage.match(/<p>(.*?)<\\/p>/)\n    return messageMatch ? messageMatch[1] : undefined\n  }\n\n  render() {\n    return (\n      <Host class={{\n        nopointer: this.hasSubmitted,\n        loading: this.isLoading\n      }}>\n        <div class=\"wrapper\">\n\n          {this.hasSubmitted ? (\n            <div class=\"form-message\">\n              <Paragraph>\n                {this.handleInlineMessage(this.inlineMessage)}\n              </Paragraph>\n            </div>\n          ) : (\n            <div class=\"form-group\">\n              <form class=\"hs-form\" onSubmit={e => this.handleNewsletterSubmit(e)}>\n                <div class=\"hs_email hs-email hs-fieldtype-text field hs-form-field\">\n                  <div class=\"input\">\n                    <input\n                      name=\"email\"\n                      type=\"email\"\n                      autocomplete=\"email\"\n                      inputmode=\"email\"\n                      value={this.email}\n                      onInput={() => this.handleEmailChange(event)}\n                      disabled={this.isLoading}\n                      placeholder=\"E-mail\"\n                      class={{ 'error': this.isValid, 'ui-paragraph-4': true }}\n                      aria-label=\"Email\"\n                      required\n                    />\n                  </div>\n                </div>\n                <div class=\"hs_submit hs-submit\">\n                  <div class=\"actions\">\n                    <input type=\"submit\" class=\"hs-button ui-button primary large\" value=\" ->\" />\n                  </div>\n                </div>\n              </form>\n\n            </div>\n          )}\n        </div>\n        {!this.isValid && (\n          <Paragraph level={5} class=\"error-message\">\n            {this.inlineMessage}\n          </Paragraph>\n        )}\n      </Host>\n    )\n  }\n}\n"],"version":3}